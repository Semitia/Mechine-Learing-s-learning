function [x6,y6] = caculate2(theta1,Param)%结构尺寸参数h=24;px=8;r1=Param(1);l1=Param(2);a =Param(3);b =Param(4);c=80;theta3=Param(5);l2=Param(6);tr(theta1)x1 = r1*cos(theta1);y1 = r1*sin(theta1);%fprintf('第一个关节 (%f,%f)\n',x1,y1);d_r=distance([x1,y1],[px,-h]);d_l=distance([x1,y1],[-px,-h]);theta6_r=atan2(y1+h,x1-px);tr(theta6_r)theta6_l=atan2(y1+h,x1+px);tr(theta6_l)theta7_r=acos((a^2+d_r^2-l1^2)/(2*a*d_r));tr(theta7_r)theta7_l=acos((a^2+d_l^2-l1^2)/(2*a*d_l));tr(theta7_l)theta4=theta6_r-theta7_r;tr(theta4)theta4_l=theta6_l+theta7_l;tr(theta4_l)%fprintf('2关节左 (%f,%f)\n',x2_l,y2_l);%fprintf('2关节右 (%f,%f)\n',x2_r,y2_r);theta5   = theta4   - theta3;tr(theta5)theta5_l = theta4_l + theta3;tr(theta5_l)x3 = b*cos(theta5);y3 = b*sin(theta5);x3_l = b*cos(theta5_l);y3_l = b*sin(theta5_l);%fprintf('3关节左 (%f,%f)\n',x3_l,y3_l);%fprintf('3关节右 (%f,%f)\n',x3,y3);%最后把两个点整合到一个坐标系上面，就取下面俩支座中点算了x_l=x3_l-px;y_l=y3_l;x_r=x3+px;y_r=y3;%求最后一个点的坐标x_mid=(x_l+x_r)/2;y_mid=(y_l+y_r)/2;theta8 = atan2(y_r-y_l,x_r-x_l) - pi/2;tr(theta8)length=(l2^2-(distance([x_l,y_l],[x_r,y_r])/2)^2)^0.5;x6=x_mid+length*cos(theta8);y6=y_mid+length*sin(theta8);%fprintf('末端关节 (%f,%f)\n',x6,y6);end